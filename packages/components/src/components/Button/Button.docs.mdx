import { Meta } from '@storybook/addon-docs/blocks';
import {
  ComponentOverview,
  ComponentExample,
} from '@iress-oss/ids-storybook-config';
import { IressAlert } from '../../main';
import * as ComponentStories from './Button.stories';
import * as CloseButtonStories from './CloseButton/CloseButton.stories';

<Meta of={ComponentStories} />

# Button

<ComponentOverview
  description="A button is a clickable item used to perform an action."
  of={ComponentStories.Default}
  meta={ComponentStories}
/>

## Examples

### Modes

The `mode` prop controls the visual appearance and priority of the button.

- **Primary:** Use for the main call to action. Limit to one per view.
- **Secondary:** Use for secondary calls to action.
- **Tertiary:** Use when you need extra affordance between your secondary actions.
- **Link:** Use when you need a button to appear like a link.
- **Danger:** Use for added affordance on destructive actions, such as deleting data.
- **Positive:** Use for buy/purchase actions.
- **Negative:** Use for sell actions.

**Note:** Avoid setting `mode` to `link` when the only child of the button is an icon, as icons inside link buttons do not have an underline, and will have no visual indication that they are clickable.

<ComponentExample of={ComponentStories.Mode} meta={ComponentStories} />

### Types

The `type` property controls the behaviour of the button. It defaults to `button`, which is the best option for most situations, but can also be set to `submit` or `reset`. `submit` should be used for buttons that submit forms, and `reset` should be used if the button clears form data and resets the form to its original state.

**Please note:** this differs from a standard HTML button element, where the `type` defaults to submit.

<ComponentExample of={ComponentStories.Types} meta={ComponentStories} />

### Loading

Loading buttons give the user an indication something is happening (eg. a form submission or extra content being loaded) after they have been triggered.

The loading state can be activated by setting the `loading` prop to `true` and providing some `loadingText` for screenreaders to announce when in loading state (which defaults to Loading...).

When the loading state is activated, any click events on the button are disabled.

<ComponentExample of={ComponentStories.Loading} meta={ComponentStories} />

### Buttons as links

The `href` prop allows you to create a link that looks like a button. When set, the component will render an HTML anchor element instead of an HTML button element. This can be useful when you want to increase the target area and visual weight of a link, without changing the markup.

A good example of this is the Next and Previous links in a wizard layout. These should be HTML links (to tells the user that navigation will occur when clicked) but styling them as buttons makes them more prominent.

You can also use the link specific props `target` and `rel`.

If you need to use custom routing, take a look at the custom route slot documentation below.

<ComponentExample
  of={ComponentStories.ButtonsAsLinks}
  meta={ComponentStories}
/>

### Delete confirmation

<IressAlert
  status={IressAlert.Status.Warning}
  heading="Make sure that the user understands the consequences of clicking the button"
  className="iress-mb--md"
>
  You may want to add a confirmation step to prevent accidental data loss if the
  action is irreversible.
</IressAlert>

The confirmation step should be a modal with a simple message, as with the example below. Use a delete button for the modal's primary call to action, and use a secondary button for the cancel action.

If you're using a heading, ensure that it has an appropriate heading level to match the document structure. You should use a danger variant of the `IressText` element, with the element prop set to the appropriate heading level.

<ComponentExample
  of={ComponentStories.DeleteConfirmation}
  meta={ComponentStories}
/>

### Fluid

If the `fluid` prop is set to true, the button will expand to be 100% of the width of its container.

The `fluid` prop can also be set to a breakpoint size, which means the button will be fluid up until its breakpoint is passed.

<ComponentExample of={ComponentStories.Fluid} meta={ComponentStories} />

### Wrapping text

Button text will wrap on to a new line if there's not enough space for the text to sit on a single line. If you want to prevent the text from wrapping, you can set the `noWrap` prop to `true`.

If your button contains a lot of text, the text may wrap on to more than one line. You can manage this on a case by case basis by setting a minimum width on your button via CSS if you need to.

<ComponentExample of={ComponentStories.WrappingText} meta={ComponentStories} />

### Slot props

Use the slots to correctly position icons or badges inside buttons.

- **Prepend** - Places the element before the text
- **Append** - Places the element after the text

The iconOnly slot from previous versions of IDS has been deprecated. Please use the default slot instead.

<ComponentExample of={ComponentStories.Slots} meta={ComponentStories} />

### Other attributes

Any other attributes you pass to the component will be spread to the underlying HTML button or anchor element.

This allows you to add your own aria attributes, or data attributes for analytics, as an example.

**Note:** The `attrs` prop has been deprecated, and will be removed in a future version. Please pass the attributes directly to the component instead.

<ComponentExample of={ComponentStories.Attrs} meta={ComponentStories} />

### Download button

Whilst `IressButton` does not have a `download` property, it can be configured quite easily.

Please see the example below. The use of an icon is optional.

<ComponentExample
  of={ComponentStories.DownloadButton}
  meta={ComponentStories}
/>

## `IressCloseButton`

`IressCloseButton` is a special variant of `IressButton` that is used to execute a close action. It is used in modals, slideouts, and other components that require a close button.

It has one additional prop, `screenReaderText`, which is used to provide a screen reader only label for the close button.

<ComponentExample
  api={{
    heading: 'Props',
    headingId: 'close-button-api',
  }}
  of={CloseButtonStories.CloseButton}
  meta={CloseButtonStories}
/>
