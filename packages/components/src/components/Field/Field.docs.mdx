import { Meta } from '@storybook/addon-docs/blocks';
import {
  ComponentOverview,
  ComponentExample,
} from '@iress-oss/ids-storybook-config';
import { IressButton } from '../../main';
import * as ComponentStories from './Field.stories';
import * as FieldGroupStories from './FieldGroup/FieldGroup.stories';

<Meta of={ComponentStories} />

# Field

<ComponentOverview
  description="The field component is used to place label, hint and error information around form controls."
  of={ComponentStories.Default}
  meta={ComponentStories}
/>

## Examples

### Label

The `label` prop is required to describe the field.

<ComponentExample of={ComponentStories.Label} meta={ComponentStories} />

### Hint

Extra information on the field can be provided using the `hint` prop. It can accept any React node, so you can add your own custom mark up (eg. external links) to the hint text.

<ComponentExample of={ComponentStories.Hint} meta={ComponentStories} />

### Error message

To display error messages associated with the field, you can use the `errorMessages` prop. This prop accepts an array of `ValidationMessageObj`, and will display each error message in a separate paragraph.

**Note:** `IressField` requires validation to be handled by the consumer. If you want out-of-the-box validation, use [`IressFormField` alongside `IressForm` instead](/docs/components-form--docs#fields).

<ComponentExample of={ComponentStories.ErrorMessage} meta={ComponentStories} />

### Custom error

For more control over the formatting of the error, you can use the `error` prop. This prop accepts any React node, so you can add your own custom mark up (eg. icons) to the error message.

**Note:** `IressField` requires validation to be handled by the consumer. If you want out-of-the-box validation, use [`IressFormField` alongside `IressForm` instead](/docs/components-form--docs#fields).

<ComponentExample of={ComponentStories.CustomError} meta={ComponentStories} />

### Hidden label

There may be certain situations where you might want to (accessibly) hide the field label (in a search field for instance). This can be done by setting the `hiddenLabel` prop.

<ComponentExample of={ComponentStories.HiddenLabel} meta={ComponentStories} />

<ComponentExample
  of={ComponentStories.HiddenLabelWithError}
  meta={ComponentStories}
/>

### Required

Fields marked as `required` will have an asterisk prepended to the label.

<ComponentExample of={ComponentStories.Required} meta={ComponentStories} />

### Optional

Fields marked as `optional` will have optional text appended to the label. This is used in cases where the majority of the fields are required, and you only want to highlight the optional fields and not overwhelm the user.

You can set `optional` to a string to customise the optional text.

<ComponentExample of={ComponentStories.Optional} meta={ComponentStories} />

### Readonly data

Fields can be used to display read-only data. This is useful when you want to display data that the user can't change, but you still want to display it in a form-like layout.

You can also pass `readOnly` prop to remove the asterisk symbol (\*) even when the field is `required`.

<ComponentExample of={ComponentStories.ReadonlyData} meta={ComponentStories} />

## `IressFieldGroup`

The `IressFieldGroup` component is used to group multiple `Field` components together. This is useful when you have multiple fields that are related to each other, and you want to display them together.

Under the hood it uses a `fieldset` and `legend` element to group the fields together, improving the semantics of your form if you use multiple inputs (eg. in the case of a checkbox group) and making it more accessible.

<ComponentExample
  api={{
    heading: 'Props',
    headingId: 'field-group-api',
  }}
  of={FieldGroupStories.Default}
  meta={FieldGroupStories}
/>

### Inline

Multiple fields can be displayed inline using the `inline` prop. On smaller screens, inline elements will wrap on to a new line if there's not enough space for everything on one line.

<ComponentExample of={FieldGroupStories.Inline} meta={FieldGroupStories} />

<ComponentExample of={FieldGroupStories.InlineSink} meta={FieldGroupStories} />

### Join

Elements can also be joined together using the `join` prop. Joined elements won't wrap on to a new line, so make sure you test your designs on small screens; depending on the use case, you may be better off with a standard inline layout (or two separate fields!).

**Note:** The `join` prop works out of the box with IDS components. To enable your custom components to work with the `join` prop, you need to ensure the direct child of `IressFieldGroup` has the class `GlobalCSSClass.FormElement`. If the direct child is not the element with the border, add the class `GlobalCSSClass.FormElementInner` to the element with the border.

<ComponentExample of={FieldGroupStories.Join} meta={FieldGroupStories} />

<ComponentExample of={FieldGroupStories.JoinSink} meta={FieldGroupStories} />

## `IressForm` integration

As of version 5, `IressField` is a standalone component and does not handle validation.

If you want out-of-the-box validation, use the `IressFormField` inside an `IressForm`. This will handle validation for you, and provide a consistent way to handle form state.

<IressButton href="/?path=/docs/components-form--docs#fields">
  View forms documentation for fields
</IressButton>
