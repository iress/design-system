import { Meta } from '@storybook/addon-docs/blocks';
import {
  ComponentOverview,
  ComponentExample,
} from '@iress-oss/ids-storybook-config';
import * as ComponentStories from './Menu.stories';

<Meta of={ComponentStories} />

# Menu

<ComponentOverview
  description="A menu can display grouped action buttons, navigation items or headings."
  propsDetails={
    <p>
      Below are the custom props you can access when using{' '}
      <code>IressMenu</code>. In addition to these, you have access to the
      original props of the underlying{' '}
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div"
        target="_blank"
        rel="noreferrer"
      >
        <code>div</code> element
      </a>
      .
    </p>
  }
  of={ComponentStories.Basic}
  meta={ComponentStories}
/>

## Usage

### Basic

`IressMenuHeading`, `IressMenuDivider` and `IressMenuItem` should be supplied as `children` of the menu.

- `IressMenuHeading` can be used to display a heading, it supports all of the props of `h*`. You can change the heading level with the `level` prop.
- `IressMenuDivider` can be used to display a divider, it supports all of the props of `hr`. It will adjust according to the menu's role and layout.
- `IressMenuItem` is a wrapper around `IressButton` and supports all of its props.

**Note:** The `mapMenuItems` helper function, originally used to map options to MenuItem components, is now deprecated. Instead, you can use `array.map` to map the options to menu sub-components.

<ComponentExample of={ComponentStories.Basic} meta={ComponentStories} />

### Complex

`IressMenuHeading` and `IressMenuItem` support `prepend`, `divider` and `append` slots, to allow you to create complex menu items.

<ComponentExample of={ComponentStories.Complex} meta={ComponentStories} />

## Examples

### Secondary navigation

When the `href` prop is set on `MenuLink`, it will render as a link.

When rendering a set of links for navigation purposes (as a secondary nav in this example) make sure you wrap the `IressMenu` in a nav element and set the menu's `role` prop to list.

<ComponentExample
  of={ComponentStories.SecondaryNavigation}
  meta={ComponentStories}
/>

### Headings

Using the `IressMenuHeading` component, you can create headings within the menu. You can also change the heading level with the `level` prop.

<ComponentExample of={ComponentStories.Headings} meta={ComponentStories} />

### Dividers

When the `divider` prop is set, the `IressMenuHeading`, `IressMenuButton` and `IressMenuLink` will render a bottom border.

In situations where a bottom border will not work, you can also use `IressMenuDivider` inside the menu to separate items.

<ComponentExample of={ComponentStories.Dividers} meta={ComponentStories} />

### Fluid menus

By setting the `fluid` prop on the menu component, the menu will stretch to the width of its containing element.

<ComponentExample of={ComponentStories.Fluid} meta={ComponentStories} />

### Layout

The `layout` prop comes with three options:

- `stack` (default) - menu items will stack on top of each other
- `inline` - menu items will be inline
- `inline-equal-width` - menu items will be inline and have equal width

<ComponentExample of={ComponentStories.Layout} meta={ComponentStories} />

### Text wrapping

By default, menu item text will wrap on to the next line when it exceeds the menu width. Using the `noWrap` prop, you set the menu item text to not wrap.

<ComponentExample of={ComponentStories.NoWrap} meta={ComponentStories} />

### Slot props

`IressMenuHeading`, `IressMenuButton` and `IressMenuLink` provide `prepend` and `append` props to position content either before or after its content.

<ComponentExample of={ComponentStories.SlotProps} meta={ComponentStories} />

### Roles

The `role` prop that comes with the menu component not only changes the aria-role of the menu to allow it to be easily recognised in screen readers, but also changes how the menu is interacted with.

There are four roles supported:

- `list` (default): The menu is treated as a list of items. Child menu subcomponents render with the `listitem` role where appropriate. The user navigates using the `tab` key.
- `menu`: The menu is treated as a menu of items. Child menu subcomponents render with the `menuitem` role where appropriate. The user navigates using `arrow` keys.
- `listbox`: The menu is treated as a list of selectable items, similar to a `<select />`. Child menu subcomponents render with the `option` role where appropriate. The user navigates using `arrow` keys.
- `nav`: The menu is treated the same as the `list` role, except the menu is styled differently.

**Note:** When menu is used as a child of popover, the `role` that is set on popover will be applied to menu (so you don't need to set it twice).

#### List

The default role for the menu component is `list`. It is most often used for navigation and its items can be navigated (using the keyboard) with the `tab` key.

<ComponentExample of={ComponentStories.ListRole} meta={ComponentStories} />

#### Menu

The `menu` role is used when the items in the menu has an action that performs a task in the application. The items can be navigated (using the keyboard) with the `arrow` keys, depending on the layout.

<ComponentExample of={ComponentStories.MenuRole} meta={ComponentStories} />

#### Listbox

The `listbox` role is used for lists from which a user may select one or more items.

A value is supplied to `IressMenuButton` (like you would with an option element inside a select) and a `onChange` event is emitted with the selected value(s) whenever the selection is changed by the user.

Set the `multiSelect` prop to true for a multi-selectable listbox.

<ComponentExample of={ComponentStories.ListboxRole} meta={ComponentStories} />

#### Nav

The `nav` role acts as a styling hook to be able to style the selected menu item differently to default menus. This will be most often used as a child of the `IressNavbar` component.

<ComponentExample of={ComponentStories.NavRole} meta={ComponentStories} />
